(this.webpackJsonplister=this.webpackJsonplister||[]).push([[0],{116:function(e,t,a){e.exports=a(147)},121:function(e,t,a){},122:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(10),c=a.n(o),i=(a(121),a(52)),l=a(53),s=a(65),u=a(64),d=(a(122),a(189)),m=a(190),p=a(191),g=a(99),f=a(26),h=a(19),v=a.n(h),E=a(35),b=a(39),y=a(41),O=a(29),w=a(182),k=a(194),C=a(197),j=a(188),S=a(186),N=a(187),x=a(185);var T=function(e){return{type:"LOGGED_IN",value:e}},L=function(e){return console.log("actions",e),{type:"GET_COORDS",value:e}},_=function(e,t,a){var n="https://api.yelp.com/v3/businesses/search?term=".concat(a,"&latitude=").concat(e,"&longitude=").concat(t,"&limit=20");return function(e){fetch("http://127.0.0.1:8080/"+n,{headers:{Authorization:"Bearer ".concat("p7pqhAhOBOUl2TTVv5dv3wG5aJeF5B88Omtb6vTw_yQv9qT75lLeB_0KnVsG__KXNTBte05YWGixZixSprR1XpLuL4QCuVMhHZ4ydate1TEBdHCpSluwzkBb2ja6XnYx")}}).then((function(t){return t.json().then((function(t){var a={type:"FETCH_PLACE",value:t.businesses};e(a)}))}))}},P=Object(f.b)((function(e){return{logStatus:e.logStatus}}),(function(e){return{newUser:function(t){return e({type:"CREATE_USER",text:t})}}}))((function(e){var t=Object(n.useState)(!1),a=Object(O.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)({email:"",username:"",password:""}),l=Object(O.a)(i,2),s=l[0],u=l[1];function d(e){var t=e.target,a=t.id,n=t.value;u((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(b.a)({},a,n))}))}function m(){return(m=Object(E.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s.username),a={email:s.email,username:s.username,password:s.password},e.next=4,fetch("http://localhost:8080/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,console.log(r),window.alert("Account Created!"),c(!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){c(!1)};return r.a.createElement("div",null,r.a.createElement(w.a,{id:"createButton",variant:"outlined",color:"inherit",onClick:function(){c(!0)}},"Create one!"),r.a.createElement(C.a,{open:o,onClose:p,"aria-labelledby":"form-dialog-title"},r.a.createElement(x.a,{id:"form-dialog-title"},"Create Account"),r.a.createElement(S.a,null,r.a.createElement(N.a,null,"Create an account to start voting on restaurants"),r.a.createElement(k.a,{autoFocus:!0,onChange:d,margin:"dense",id:"username",label:"Username",type:"username",value:s.username,fullWidth:!0}),r.a.createElement(k.a,{onChange:d,margin:"dense",id:"email",label:"email",type:"email",value:s.email,fullWidth:!0}),r.a.createElement(k.a,{onChange:d,id:"password",label:"Password",type:"password",autoComplete:"current-password",value:s.password,fullWidth:!0})),r.a.createElement(j.a,null,r.a.createElement(w.a,{onClick:function(e){return m.apply(this,arguments)},color:"primary"},"Create Account"),r.a.createElement(w.a,{onClick:p,color:"primary"},"Cancel"))))}));var I=Object(f.b)((function(e){return{logStatus:e.logStatus}}),(function(e){return{loggedIn:function(t){return e(T(t))}}}))((function(e){var t=r.a.useState(!1),a=Object(O.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)({username:"",password:""}),l=Object(O.a)(i,2),s=l[0],u=l[1];function d(e){var t=e.target,a=t.id,n=t.value;u((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(b.a)({},a,n))}))}function m(){return(m=Object(E.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.logStatus){t.next=5;break}e.loggedIn(!1),c(!1),t.next=13;break;case 5:return t.next=7,fetch("http://localhost:8080/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 7:return n=t.sent,t.next=10,n.json();case 10:r=t.sent,console.log(r),r.token&&(e.loggedIn(!0),window.alert("You are now logged in!"),c(!1));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var p=function(){c(!1)};return r.a.createElement("div",null,r.a.createElement(w.a,{variant:"outlined",color:"inherit",onClick:function(){!0===e.logStatus?(e.loggedIn(!1),c(!1)):c(!0)}},!0===e.logStatus?"Sign Out":"sign in to vote!"),r.a.createElement(C.a,{open:o,onClose:p,"aria-labelledby":"form-dialog-title"},r.a.createElement(x.a,{id:"form-dialog-title"},"Sign In"),r.a.createElement(S.a,null,r.a.createElement(N.a,null,"Log in here to vote a restaurant up or down."),r.a.createElement(k.a,{autoFocus:!0,margin:"dense",id:"username",onChange:d,value:s.username,label:"Username",type:"username",fullWidth:!0}),r.a.createElement(k.a,{id:"password",onChange:d,label:"Password",type:"password",autoComplete:"current-password",value:s.password,fullWidth:!0})),r.a.createElement(j.a,null,r.a.createElement(w.a,{onClick:function(e){return m.apply(this,arguments)},color:"primary"},"Sign In"),r.a.createElement(w.a,{onClick:p,color:"primary"},"Cancel")),r.a.createElement(j.a,null,"If you do not have an account,",r.a.createElement(P,null))))})),z=a(17),A=Object(d.a)((function(e){return{root:{flexGrow:1,backgroundColor:"orangered",height:80},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:6,fontSize:40,fontFamily:"'Open Sans', sans-serif"},mood:{marginRight:10}}}));function B(){var e=A();return r.a.createElement("div",null,r.a.createElement(m.a,{position:"static"},r.a.createElement(p.a,{className:e.root,border:0},r.a.createElement(g.a,{variant:"h6",className:e.title},r.a.createElement(z.b,{id:"listrTitle",to:"/"},"Listr")),r.a.createElement(I,null))))}var G=a(8),R=a(46),U=a(66),W=a(44),H=a(91),V=a(98),D=a(192),M=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={latitude:null,longitude:null},n.getLocation=n.getLocation.bind(Object(R.a)(n)),n.getCoordinates=n.getCoordinates.bind(Object(R.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"getLocation",value:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.getCoordinates,this.handleLocationError):alert("geolocation not supported by this browser")}},{key:"getCoordinates",value:function(e){document.cookie="latitude="+e.coords.latitude,document.cookie="longitude="+e.coords.longitude,this.setState({latitude:e.coords.latitude,longitude:e.coords.longitude})}},{key:"handleLocationError",value:function(e){switch(e.code){case e.PERMISSION_DENIED:alert("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case e.TIMEOUT:alert("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:alert("An unknown error occurred.");break;default:alert("an unknown error occurred.")}}},{key:"render",value:function(){var e=this;return null==this.state.latitude?r.a.createElement("div",{className:"loadingDiv"},r.a.createElement(D.a,{className:"progress"})):r.a.createElement("div",{className:"homeBody"},r.a.createElement("div",{id:"chooseHeading"},"Choose a cuisine"),r.a.createElement("div",{className:"homeMain"},r.a.createElement("div",{className:"iconContainer"},r.a.createElement(z.b,{to:"/Listings/pizza",search:"?q=pizza"},r.a.createElement(w.a,{id:"pizza",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"pizza")},"data-tip":"pizza"},r.a.createElement(U.c,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/burgers"},r.a.createElement(w.a,{id:"burger",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"burgers")},"data-tip":"burgers"},r.a.createElement(U.b,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/asian"},r.a.createElement(w.a,{id:"asian",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"asian")},"data-tip":"asian"},r.a.createElement(W.b,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/breakfast"},r.a.createElement(w.a,{id:"breakfast",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"breakfast")},"data-tip":"breakfast"},r.a.createElement(H.a,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/sandwich"},r.a.createElement(w.a,{id:"sandwich",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"sandwich")},"data-tip":"sandwiches"},r.a.createElement(W.c,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/bakery"},r.a.createElement(w.a,{id:"dessert",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"bakery")},"data-tip":"bakery"},r.a.createElement(W.a,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/mexican"},r.a.createElement(w.a,{id:"mexican",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"mexican")},"data-tip":"mexican"},r.a.createElement(W.e,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/seafood"},r.a.createElement(w.a,{id:"seafood",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"seafood")},"data-tip":"seafood"},r.a.createElement(U.a,{className:"icons"}))),r.a.createElement(z.b,{to:"/Listings/steak"},r.a.createElement(w.a,{id:"steak",onClick:function(){return e.props.getPlace(e.state.latitude,e.state.longitude,"steak")},"data-tip":"steak"},r.a.createElement(W.d,{className:"icons"}))),r.a.createElement(V.a,null))))}}]),a}(n.Component),F=Object(f.b)((function(e){return{user:e.user,place:e.place,coords:e.coords,logStatus:e.logStatus}}),(function(e){return{getPlace:function(t,a,n){return e(_(t,a,n))},getCoords:function(t){return e(L(t))},loggedIn:function(t){return e(T(t))}}}))(M),J=a(198),$=a(199),q=a(193),K=a(95),X=a.n(K),Y=a(93),Q=a.n(Y),Z=a(94),ee=a.n(Z),te=a(195),ae=a(92),ne=a.n(ae),re=Object(d.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},item:{width:"100%",display:"flex"},voter:{backgroundColor:"lightgray",display:"flex"},paper:{width:"75%",textAlign:"center"},paperGrid:{display:"flex",justifyContent:"center"}}})),oe=function(e){var t=re(),a=[];a=e.place.map((function(e){return Object.assign(e,{vote:0})}));var o=Object(n.useState)(0),c=Object(O.a)(o,2),i=c[0],l=c[1],s=Object(n.useState)(""),u=Object(O.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)([]),f=Object(O.a)(p,2),h=f[0],b=f[1],y=function(){var e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne()("http://localhost:8080/listings");case 2:t=e.sent,b(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){y()}),[]);var k=function(){var e=Object(E.a)(v.a.mark((function e(t,a){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8080/listings",{method:a,headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function C(e){return j.apply(this,arguments)}function j(){return(j=Object(E.a)(v.a.mark((function e(t){var a,n,r,o,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.currentTarget.id,m(d=a),n=h.filter((function(e){return e.restaurant_id===a&&e.restaurant_id})),r=function(){l(i=n[0].vote_total+1)},o=function(){l(i=n[0].vote_total-1)},0!=n.length){e.next=12;break}return console.log(t.currentTarget.id),"upVote"===t.currentTarget.value?l(i=1):"downVote"===t.currentTarget.value&&l(i=-1),c={vote_total:i,restaurant_id:t.currentTarget.id},k(c,"POST"),y(),e.abrupt("return");case 12:n[0].restaurant_id&&("upVote"===t.currentTarget.value?(r(),n[0].vote_total=i):"downVote"===t.currentTarget.value&&(o(),n[0].vote_total=i),k({vote_total:i,restaurant_id:d},"PUT"));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return.000621371192*e}return a.map((function(e){if(0===a.length)console.log("empty");else for(var t=0;t<h.length;t++)if(e.id===h[t].restaurant_id)return e.vote=h[t].vote_total})),a.sort((function(e,t){var a=e.vote,n=t.vote,r=0;return a>n?r=-1:a<n&&(r=1),r})),0===a.length?r.a.createElement("div",{className:"loadingDiv"},r.a.createElement(D.a,{className:"progress"})):r.a.createElement("div",{className:t.root},(console.log("data : ",h),console.log("yelpPlaces : ",a)),a.map((function(a,n){return r.a.createElement("div",{className:"listItem",key:n},e.logStatus&&r.a.createElement(te.a,{boxShadow:2,className:t.voter},r.a.createElement(w.a,{id:a.id,value:"upVote",onClick:C},r.a.createElement(Q.a,null)),r.a.createElement(w.a,{id:a.id,value:"downVote",onClick:C},r.a.createElement(ee.a,null))),r.a.createElement(J.a,{className:"expansionPanel"},r.a.createElement($.a,{expandIcon:r.a.createElement(X.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement("div",{className:"itemHeading"},r.a.createElement("div",{className:"itemHeadingText"},a.name),r.a.createElement("div",{className:"itemHeadingText",id:"score"},"Listr Score: ",a.vote),r.a.createElement("div",{className:"itemHeadingText",id:"distance"},Number(S(a.distance).toFixed(2))," Miles from you!"),r.a.createElement("div",{className:"itemHeadingText",id:"distanceMobile"},Number(S(a.distance).toFixed(2))," Miles"))),r.a.createElement(q.a,null,r.a.createElement(g.a,{className:"detailsList"},r.a.createElement("li",null,"Phone : ",a.display_phone),r.a.createElement("li",null,"Address : ",a.location.address1,".",a.location.city,", ",a.location.state),r.a.createElement("li",null,"Price range : ","$$$"===(o=a.price)?"expensive":"$$"===o?"average":"cheap"),r.a.createElement("li",{id:"scoreMobile"},"Listr Score: ",a.vote)))));var o})))},ce=Object(f.b)((function(e){return{getUser:e.user,place:e.place,coords:e.coords,logStatus:e.logStatus}}),(function(e){return{getPlace:function(t){return e(_(t))},getCoords:function(t){return e(L(t))},loggedIn:function(t){return e(T(t))}}}))(oe),ie=function(){return r.a.createElement(G.c,null,r.a.createElement(G.a,{exact:!0,path:"/",component:F}),r.a.createElement(G.a,{path:"/Listings/:type",component:ce}),r.a.createElement(G.a,{path:"/Listings",component:ce}))},le=a(38),se=a(97),ue=Object(le.c)({place:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLACE":return Object(se.a)(t.value);default:return e}},coords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COORDS":return[t.cords];default:return e}},logStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGGED_IN":return t.value;default:return e}}}),de=a(96),me=Object(le.d)(ue,{place:[],user:[],coords:{latitude:null,longitude:null},voteTotal:[],logStatus:!1},Object(le.a)(de.a)),pe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(f.a,{store:me},r.a.createElement(z.a,null,r.a.createElement(B,null),r.a.createElement(ie,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[116,1,2]]]);
//# sourceMappingURL=main.8bc7a1a6.chunk.js.map